var $imageMap,settings;!function(p){p.fn.rwdImageMaps=function(){var t=this,c=parseFloat(p.fn.jquery),a=function(){t.each(function(){if(void 0!==p(this).attr("usemap")){var d=this,h=p(d);p("<img />").on("load",function(){var o,r,t="width",a="height";if(r=c<1.6?(o=d.getAttribute(t),d.getAttribute(a)):(o=h.attr(t),h.attr(a)),!o||!r){var e=new Image;e.src=h.attr("src"),o||(o=e.width),r||(r=e.height)}var s=h.width()/100,n=h.height()/100,i=h.attr("usemap").replace("#",""),l="coords";p('map[name="'+i+'"]').find("area").each(function(){var t=p(this);t.data(l)||t.data(l,t.attr(l));for(var a=t.data(l).split(","),e=new Array(a.length),i=0;i<e.length;++i)e[i]=i%2==0?parseInt(a[i]/o*100*s):parseInt(a[i]/r*100*n);t.attr(l,e.toString())})}).attr("src",h.attr("src"))}})};return p(window).resize(a).trigger("resize"),setTimeout(a,500),this}}(jQuery),function(h){var t,c,p,u,f,m,g,e,d,v,w,y;if(c=!!document.createElement("canvas").getContext,t=function(){var t=document.createElement("div");t.innerHTML='<v:shape id="vml_flag1" adj="1" />';var a=t.firstChild;return a.style.behavior="url(#default#VML)",!a||"object"==typeof a.adj}(),c||t){if(c){e=function(t){return Math.max(0,Math.min(parseInt(t,16),255))},d=function(t,a){return"rgba("+e(t.substr(0,2))+","+e(t.substr(2,2))+","+e(t.substr(4,2))+","+a+")"},p=function(t){y=$imageMap[0].offsetLeft+"px";var a=h('<canvas style="display: block; margin-left:'+y+"; position: absolute; width:"+t.width+"px;height:"+t.height+'px;"></canvas>').get(0);return a.width=t.width,a.height=t.height,a.getContext("2d").clearRect(0,0,t.width,t.height),a};var b=function(t,a,e,o,r){if(o=o||0,r=r||0,t.beginPath(),"rect"==a)t.rect(e[0]+o,e[1]+r,e[2]-e[0],e[3]-e[1]);else if("poly"==a)for(t.moveTo(e[0]+o,e[1]+r),i=2;i<e.length;i+=2)t.lineTo(e[i],e[i+1]);else"circ"==a&&t.arc(e[0]+o,e[1]+r,e[2],0,2*Math.PI,!1);t.closePath()};u=function(t,a,e,i,o){var r=t.getContext("2d");if(i.shadow){r.save(),"inside"==i.shadowPosition&&(b(r,a,e),r.clip());var s=100*t.width,n=100*t.height;b(r,a,e,s,n),r.shadowOffsetX=i.shadowX-s,r.shadowOffsetY=i.shadowY-n,r.shadowBlur=i.shadowRadius,r.shadowColor=d(i.shadowColor,i.shadowOpacity);var l=i.shadowFrom;l||(l="outside"==i.shadowPosition?"fill":"stroke"),"stroke"==l?(r.strokeStyle="rgba(0,0,0,1)",r.stroke()):"fill"==l&&(r.fillStyle="rgba(0,0,0,1)",r.fill()),r.restore(),"outside"==i.shadowPosition&&(r.save(),b(r,a,e),r.globalCompositeOperation="destination-out",r.fillStyle="rgba(0,0,0,1);",r.fill(),r.restore())}r.save(),b(r,a,e),i.fill&&(r.fillStyle=d(i.fillColor,i.fillOpacity),r.fill()),i.stroke&&(r.strokeStyle=d(i.strokeColor,i.strokeOpacity),r.lineWidth=i.strokeWidth,r.stroke()),r.restore(),i.fade&&h(t).css("opacity",0).animate({opacity:1},100)},f=function(t){t.getContext("2d").clearRect(0,0,t.width,t.height)}}else console.log("iexplorer"),p=function(t){return h('<var style="display:block;width:'+t.width+"px;height:"+t.height+"px;position:absolute; margin-left:"+y+'px;"></var>').get(0)},u=function(t,a,e,i,o){var r,s,n,l;r='<v:fill color="#'+i.fillColor+'" opacity="'+(i.fill?i.fillOpacity:0)+'" />',s=i.stroke?'strokeweight="'+i.strokeWidth+'" stroked="t" strokecolor="#'+i.strokeColor+'"':'stroked="f"',n='<v:stroke opacity="'+i.strokeOpacity+'"/>',"rect"==a?l=h('<v:rect name="'+o+'" filled="t" '+s+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+e[0]+"px;top:"+e[1]+"px;width:"+(e[2]-e[0])+"px;height:"+(e[3]-e[1])+'px;"></v:rect>'):"poly"==a?l=h('<v:shape name="'+o+'" filled="t" '+s+' coordorigin="0,0" coordsize="'+t.width+","+t.height+'" path="m '+e[0]+","+e[1]+" l "+e.join(",")+' x e" style="zoom:1;margin:0;padding:0;display:block;position:absolute;top:0px;left:0px;width:'+t.width+"px;height:"+t.height+'px;"></v:shape>'):"circ"==a&&(l=h('<v:oval name="'+o+'" filled="t" '+s+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+(e[0]-e[2])+"px;top:"+(e[1]-e[2])+"px;width:"+2*e[2]+"px;height:"+2*e[2]+'px;"></v:oval>')),l.get(0).innerHTML=r+n,h(t).append(l)},f=function(t){h(t).find("[name=highlighted]").remove()};m=function(t){var a,e=t.getAttribute("coords").split(",");for(a=0;a<e.length;a++)e[a]=parseFloat(e[a]);return[t.getAttribute("shape").toLowerCase().substr(0,4),e]},w=function(t,a){var e=h(t);return h.extend({},a,!!h.metadata&&e.metadata(),e.data("maphilight"))},v=function(t){return!!t.complete&&(void 0===t.naturalWidth||0!==t.naturalWidth)};var a=!(g={});h.fn.maphilight=function(d){if(d=h.extend({},h.fn.maphilight.defaults,d),!c&&!a){document.namespaces.add("v","urn:schemas-microsoft-com:vml");var t=document.createStyleSheet();h.each(["shape","rect","oval","circ","fill","stroke","imagedata","group","textbox"],function(){t.addRule("v\\:"+this,"behavior: url(#default#VML); antialias:true")}),a=!0}return this.each(function(){var e,t,r,s,n,i,a,o;if(e=h(this),!v(this))return window.setTimeout(function(){e.maphilight(d)},200);if(r=h.extend({},d,!!h.metadata&&e.metadata(),e.data("maphilight")),(o=e.get(0).getAttribute("usemap"))&&(s=h('map[name="'+o.substr(1)+'"]'),e.is('img,input[type="image"]')&&o&&0<s.length)){if(e.hasClass("maphilighted")){var l=e.parent();e.insertBefore(l),l.remove(),h(s).unbind(".maphilight").find("area[coords]").unbind(".maphilight")}(t=h("<div></div>").css({display:"block",position:"relative",marginLeft:"auto",marginRight:"auto","background-image":'url("'+this.src+'")',"background-repeat":"no-repeat","background-size":"contain","background-position":"50%, 50%",width:"100%"})).addClass("map").addClass("maphilighted"),r.wrapClass&&(!0===r.wrapClass?t.addClass(h(this).attr("class")):t.addClass(r.wrapClass)),y=$imageMap[0].offsetLeft+"px",e.before(t).css("opacity",1).css(g).remove(),t.append(e),n=p(this),h(n).css(g),a=function(t){var a,e;if(!(e=w(this,r)).neverOn&&!e.alwaysOn){if(a=m(this),u(n,a[0],a[1],e,"highlighted"),e.groupBy){var i;i=/^[a-zA-Z][\-a-zA-Z]+$/.test(e.groupBy)?s.find("area["+e.groupBy+'="'+h(this).attr(e.groupBy)+'"]'):s.find(e.groupBy);var o=this;i.each(function(){if(this!=o){var t=w(this,r);if(!t.neverOn&&!t.alwaysOn){var a=m(this);u(n,a[0],a[1],t,"highlighted")}}})}c||h(n).append("<v:rect></v:rect>")}},h(s).bind("alwaysOn.maphilight",function(){i&&f(i),c||h(n).empty(),h(s).find("area[coords]").each(function(){var t,a;(a=w(this,r)).alwaysOn&&(!i&&c&&(i=p(e[0]),h(i).css(g),i.width=e[0].width,i.height=e[0].height,e.before(i)),a.fade=a.alwaysOnFade,t=m(this),u(c?i:n,t[0],t[1],a,""))})}),h(s).trigger("alwaysOn.maphilight").find("area[coords]").bind("mouseover.maphilight",a).bind("mouseout.maphilight",function(t){f(n)}),e.css("opacity","0").css("display","block").css("margin-left","auto").css("margin-right","auto").css("position","relative").addClass("map").addClass("maphilighted")}})},h.fn.maphilight.defaults={fill:!0,fillColor:"FF0000",fillOpacity:.1,stroke:!0,strokeColor:"FF0000",strokeOpacity:1,strokeWidth:1,fade:!0,alwaysOn:!1,neverOn:!1,groupBy:!1,wrapClass:!0,shadow:!1,shadowX:0,shadowY:0,shadowRadius:10,shadowColor:"000000",shadowOpacity:.8,shadowPosition:"outside",shadowFrom:!1}}else h.fn.maphilight=function(){return this}}(jQuery),function(u){var p={url:!1,callback:!1,target:!1,duration:120,on:"dblclick",touch:!1,onZoomIn:!1,onZoomOut:!1,magnify:1.3};u.zoom=function(t,a,i,e){var o,r,s,n,l,d,h,c=u(t).css("position"),p=u(a);return t.style.position=/(absolute|fixed)/.test(c)?c:"relative",t.style.overflow="hidden",i.style.width=i.style.height="",u(i).addClass("zoomImg").css({position:"absolute",top:0,left:0,opacity:0,width:i.width*e,height:i.height*e,border:"none",maxWidth:"none",maxHeight:"none",display:"none"}).appendTo(t),{init:function(){r=u(t).outerWidth(),o=u(t).outerHeight(),s=a===t?(n=r,o):(n=p.outerWidth(),p.outerHeight()),l=(i.width-r)/n,d=(i.height-o)/s,h=p.offset()},move:function(t){var a=t.pageX-h.left,e=t.pageY-h.top;e=Math.max(Math.min(e,s),0),a=Math.max(Math.min(a,n),0),i.style.left=a*-l+"px",i.style.top=e*-d+"px"}}},u.fn.zoom=function(c){return this.each(function(){var t,a,e,i=u.extend({},p,c||{}),o=i.target||this,r=this,s=u(r),n=document.createElement("img"),l=u(n),d="mousemove.zoom",h=!1;(i.url||((t=s.find("img"))[0]&&(i.url=t.data("src")||t.attr("src")),i.url))&&(a=o.style.position,e=o.style.overflow,s.one("zoom.destroy",function(){s.off(".zoom"),o.style.position=a,o.style.overflow=e,l.remove()}),n.onload=function(){var e=u.zoom(o,r,n,i.magnify);"dblclick"===i.on&&s.on("dblclick.zoom",function(t){return h?void 0:(h=!0,a=t,u("#toZoom").addClass("zoom"),u(".zoomImg").css("display","block"),e.init(),e.move(a),l.stop().fadeTo(u.support.opacity?i.duration:0,1,!!u.isFunction(i.onZoomIn)&&i.onZoomIn.call(n)),u(document).on(d,e.move),u(document).one("dblclick.zoom",function(){l.stop().fadeTo(i.duration,0,!!u.isFunction(i.onZoomOut)&&i.onZoomOut.call(n)),setTimeout(function(){u(".zoomImg").css("display","none"),u("#toZoom").removeClass("zoom")},250),h=!1,u(document).off(d,e.move)}),!1);var a}),u.isFunction(i.callback)&&i.callback.call(n)},n.src=i.url)})},u.fn.zoom.defaults=p}(jQuery);var partsArr=[];function removeAllSelectedRowsAndParts(){for(var t=0;t<partsArr.length;t++)selectRowAndPart(partsArr[t],!1)}function selectRowAndPart(t,a){a?$("table tr[data-mapid="+t+"]").css("background-color","yellow"):$("table tr[data-mapid="+t+"]").css("background-color","transparent"),$("area[data-mapid="+t+"]").data("maphilight",{alwaysOn:a}).trigger("alwaysOn.maphilight")}!function(i){i.fn.setMapTable=function(){i("area").hover(function(){selectRowAndPart(i(this).attr("data-mapid"),!0)},function(){var t=i(this).attr("data-mapid");-1==i.inArray(t,partsArr)&&selectRowAndPart(t,!1)}),i("tr").hover(function(){var t=i(this).attr("data-mapid"),a=i("area[data-mapid="+t+"]").data("maphilight");void 0!==a&&a.alwaysOn||selectRowAndPart(t,!0)},function(){var t=i(this).attr("data-mapid");-1==i.inArray(t,partsArr)&&selectRowAndPart(t,!1)}),i("html").on("click",function(t){var a=i(t.target);t.ctrlKey||a.is("a")||a.is("td")||a.is("h1")||a.is("h4")||(removeAllSelectedRowsAndParts(),partsArr=[])}),i("area, tr").on("click",function(t){if(!i(t.target).parent().is("a")){var a=i(this).attr("data-mapid");if(t.ctrlKey){var e=jQuery.inArray(a,partsArr);-1<e?(partsArr.splice(e,1),removeAllSelectedRowsAndParts(),partsArr.forEach(function(t){selectRowAndPart(t,!0)})):(partsArr.push(a),selectRowAndPart(a,!0))}else removeAllSelectedRowsAndParts(),selectRowAndPart(a,!0),(partsArr=[]).push(a)}return!1})}}(jQuery),function(e){var i={zoom:!0,table:!0,fill:!0,fillColor:"FF0000",fillOpacity:.1,stroke:!0,strokeColor:"FF0000",strokeOpacity:1,strokeWidth:1,fade:!0,alwaysOn:!1,neverOn:!1,groupBy:!1,wrapClass:!0,shadow:!1,shadowX:0,shadowY:0,shadowRadius:10,shadowColor:"000000",shadowOpacity:.8,shadowPosition:"outside",shadowFrom:!1};e.fn.mapTrifecta=function(t){if($imageMap=this,settings=e.extend({},i,t||{}),$imageMap.maphilight(settings),$imageMap.rwdImageMaps(),settings.zoom){$imageMap.parent().wrap("<span id='toZoom' class='zoom'></span>"),e("#toZoom").zoom({on:"dblclick"}).removeClass("zoom");var a=$imageMap.width();e("#toZoom").width(a)}return settings.table&&e().setMapTable(),this}}(jQuery),jQuery(window).bind("resize",function(t){window.resizeEvt,jQuery(window).resize(function(){clearTimeout(window.resizeEvt),window.resizeEvt=setTimeout(function(){try{$imageMap.maphilight(settings);var t=$imageMap.width();$("#toZoom").width(t)}catch(t){console.error(t.message)}},10)})});